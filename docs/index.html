<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Chunk.html">Chunk</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MetaEvent.html">MetaEvent</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="NoteEvent.html">NoteEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NoteEvent.html#buildData">buildData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NoteEvent.html#convertVelocity">convertVelocity</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NoteEvent.html#getDurationMultiplier">getDurationMultiplier</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NoteEvent.html#getNoteOffStatus">getNoteOffStatus</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NoteEvent.html#getNoteOnStatus">getNoteOnStatus</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NoteEvent.html#getTickDuration">getTickDuration</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="NoteOffEvent.html">NoteOffEvent</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="NoteOnEvent.html">NoteOnEvent</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ProgramChangeEvent.html">ProgramChangeEvent</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Track.html">Track</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#addCopyright">addCopyright</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#addCuePoint">addCuePoint</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#addEvent">addEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#addInstrumentName">addInstrumentName</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#addLyric">addLyric</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#addMarker">addMarker</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#addText">addText</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#addTrackName">addTrackName</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#polyModeOn">polyModeOn</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#setKeySignature">setKeySignature</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#setTempo">setTempo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Track.html#setTimeSignature">setTimeSignature</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Utils.html">Utils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#.getPitch">getPitch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#.isNumeric">isNumeric</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#.numberFromBytes">numberFromBytes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#.numberToBytes">numberToBytes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#.numberToVariableLength">numberToVariableLength</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#.stringByteCount">stringByteCount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#.stringToBytes">stringToBytes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#.toArray">toArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#.version">version</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Writer.html">Writer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Writer.html#base64">base64</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Writer.html#buildFile">buildFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Writer.html#dataUri">dataUri</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Writer.html#saveMIDI">saveMIDI</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Writer.html#stdout">stdout</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Constants">Constants</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>&#9836; MidiWriterJS</h1><p><a href="https://badge.fury.io/js/midi-writer-js"><img src="https://badge.fury.io/js/midi-writer-js.svg" alt="npm version"></a>
<a href="https://travis-ci.org/grimmdude/MidiWriterJS"><img src="https://travis-ci.org/grimmdude/MidiWriterJS.svg?branch=master" alt="Build Status"></a></p>
<p>MidiWriterJS is a JavaScript library providing an API for generating expressive multi-track MIDI files.  </p>
<p>Note that the <code>master</code> branch is in active development so if you're looking for a tried and true stable version please use the latest release.</p>
<p><a href="http://grimmdude.com/MidiWriterJS/docs/">Source Documentation</a></p>
<h2>Install</h2><pre class="prettyprint source lang-sh"><code>npm install midi-writer-js</code></pre><h2>Getting Started</h2><pre class="prettyprint source lang-javascript"><code>var MidiWriter = require('midi-writer-js');

// Start with a new track
var track = new MidiWriter.Track();

// Define an instrument (optional):
track.addEvent(new MidiWriter.ProgramChangeEvent({instrument : 1}));

// Add some notes:
var note = new MidiWriter.NoteEvent({pitch:['C4', 'D4', 'E4'], duration: '4'});
track.addEvent(note);

// Generate a data URI
var write = new MidiWriter.Writer([track]);
console.log(write.dataUri());</code></pre><h2>Documentation</h2><h3><code>MidiWriter.Track()</code></h3><ul>
<li><code>addEvent({event}, mapFunction)</code></li>
<li><code>setTempo(tempo)</code></li>
<li><code>addText(text)</code></li>
<li><code>addCopyright(text)</code></li>
<li><code>addTrackName(text)</code></li>
<li><code>addInstrumentName(text)</code></li>
<li><code>addMarker(text)</code></li>
<li><code>addCuePoint(text)</code></li>
<li><code>addLyric(text)</code></li>
<li><code>setTimeSignature(numerator, denominator)</code></li>
</ul>
<h3><code>MidiWriter.NoteEvent({options})</code></h3><p>The <code>NoteEvent</code> supports these options:</p>
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>pitch</b></td>
            <td>array</td>
            <td>An array of notes to be triggered.  Can be a string or valid MIDI note code.  Format for string is <code>C#4</code>.  Pro tip: You can use the output from <a href="https://github.com/danigb/tonal" target="_blank">tonal</a> functions to build scales, chords, intervals, etc. in this parameter.</td>
        </tr>
        <tr>
            <td><b>duration</b></td>
            <td>string or array</td>
            <td>
                How long the note should sound.
                <ul>
                    <li><code>1</code>  : whole</li>
                    <li><code>2</code>  : half</li>
                    <li><code>d2</code> : dotted half</li>
                    <li><code>4</code>  : quarter</li>
                    <li><code>4t</code>  : quarter triplet</li>
                    <li><code>d4</code> : dotted quarter</li>
                    <li><code>8</code>  : eighth</li>
                    <li><code>8t</code> : eighth triplet</li>
                    <li><code>d8</code> : dotted eighth</li>
                    <li><code>16</code> : sixteenth</li>
                    <li><code>16t</code> : sixteenth triplet</li>
                    <li><code>32</code> : thirty-second</li>
                    <li><code>64</code> : sixty-fourth</li>
                    <li><code>Tn</code> : where n is an explicit number of ticks</li>
                </ul>
                If an array of durations is passed then the sum of the durations will be used.
            </td>
        </tr>
        <tr>
            <td><b>wait</b></td>
            <td>string or array</td>
            <td>How long to wait before sounding note (rest).  Takes same values as <b>duration</b>.</td>
        </tr>
        <tr>
            <td><b>sequential</b></td>
            <td>boolean</td>
            <td>If true then array of pitches will be played sequentially as opposed to simulatanously.  Default: <code>false</code></td>
        </tr>
        <tr>
            <td><b>velocity</b></td>
            <td>number</td>
            <td>How loud the note should sound, values 1-100.  Default: <code>50</code></td>
        </tr>
        <tr>
            <td><b>repeat</b></td>
            <td>number</td>
            <td>How many times this event should be repeated. Default: <code>1</code></td>
        </tr>
        <tr>
            <td><b>channel</b></td>
            <td>number</td>
            <td>MIDI channel to use. Default: <code>1</code></td>
        </tr>
        <tr>
            <td><b>grace</b></td>
            <td>string or array</td>
            <td>Grace note to be applied to note event.  Takes same value format as <code>pitch</code></td>
        </tr>
    </tbody>
</table>


<h3><code>MidiWriter.Writer([tracks])</code></h3><p>The <code>Writer</code> class provides a few ways to output the file:</p>
<ul>
<li><code>buildFile()</code> <em>Uint8Array</em></li>
<li><code>base64()</code> <em>string</em></li>
<li><code>dataUri()</code> <em>string</em></li>
<li><code>stdout()</code> <em>file stream (cli)</em></li>
</ul>
<h3>Hot Cross Buns</h3><p>Here's an example of how everyone's favorite song &quot;Hot Cross Buns&quot; could be written.  Note use of the mapping function passed as the second argument of <code>addEvent()</code>.  This can be used to apply specific properties to all events.  With some 
street smarts you could also use it for programmatic crescendos and other property 'animation'.</p>
<pre class="prettyprint source lang-javascript"><code>var MidiWriter = require('midi-writer-js');

var track = new MidiWriter.Track();

track.addEvent([
            new MidiWriter.NoteEvent({pitch: ['E4','D4'], duration: '4'}),
            new MidiWriter.NoteEvent({pitch: ['C4'], duration: '2'}),
            new MidiWriter.NoteEvent({pitch: ['E4','D4'], duration: '4'}),
            new MidiWriter.NoteEvent({pitch: ['C4'], duration: '2'}),
            new MidiWriter.NoteEvent({pitch: ['C4', 'C4', 'C4', 'C4', 'D4', 'D4', 'D4', 'D4'], duration: '8'}),
            new MidiWriter.NoteEvent({pitch: ['E4','D4'], duration: '4'}),
            new MidiWriter.NoteEvent({pitch: ['C4'], duration: '2'})
    ], function(event, index) {
    return {sequential:true};
  }
);

var write = new MidiWriter.Writer([track]);
console.log(write.dataUri());</code></pre><h3>VexFlow Integration</h3><p>MidiWriterJS can export MIDI from VexFlow voices, though this feature is still experimental.  Current usage is to use <code>MidiWriter.VexFlow.trackFromVoice(voice)</code> to create a MidiWriterJS <code>Track</code> object:</p>
<pre class="prettyprint source lang-javascript"><code>
// ...VexFlow code defining notes
var voice = create_4_4_voice().addTickables(notes);

var track = MidiWriter.VexFlow.trackFromVoice(voice);
var writer = new MidiWriter.Writer([track]);
console.log(writer.dataUri());</code></pre></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Nov 08 2017 21:57:06 GMT-0800 (PST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>